

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.2. Reflection &mdash; FTOOP Java Examples 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="FTOOP Java Examples 1.0 documentation" href="../../index.html"/>
        <link rel="up" title="3. Advanced Techniques" href="../index.html"/>
        <link rel="next" title="4. GUI" href="../../gui/gui.html"/>
        <link rel="prev" title="3.1. Annotations" href="../annotation/annoations.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> FTOOP Java Examples
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../patterns/index.html">1. Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../threading/index.html">2. Threading</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">3. Advanced Techniques</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../annotation/annoations.html">3.1. Annotations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.2. Reflection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vorteile">3.2.1. Vorteile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nachteile">3.2.2. Nachteile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#beispiel-allgemein">3.2.3. Beispiel Allgemein</a></li>
<li class="toctree-l3"><a class="reference internal" href="#beispiel-aufgabe-interface-creator">3.2.4. Beispiel Aufgabe Interface Creator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gui/gui.html">4. GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../smells/smells.html">5. Smells</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">FTOOP Java Examples</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">3. Advanced Techniques</a> &raquo;</li>
      
    <li>3.2. Reflection</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/advanced-techniques/reflection/reflection.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reflection">
<h1>3.2. Reflection<a class="headerlink" href="#reflection" title="Permalink to this headline">¶</a></h1>
<p>Die Reflection-API bildet ein Modell der Java-Sprache. Die Reflection-API beschreibt
mittels Klassen wie Method, Constructor, Class, Field, etc. die Elemente von Java.
Mit Reflection kann die Struktur unbekannter Objekte und Klassen zur Laufzeit analysiert
werden. Ausserdem können damit Methoden und Konstruktoren aufgerufen und
Felder gesetzt werden.</p>
<p><strong>Class-Objekte erhält man über</strong></p>
<ul class="simple">
<li>anyObject.getClass()</li>
<li>AnyClass.class</li>
<li>Class.forName(&#8220;fully.qualified.Name&#8221;)</li>
</ul>
<div class="section" id="vorteile">
<h2>3.2.1. Vorteile<a class="headerlink" href="#vorteile" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Von der Klasse, die Reflection benutzt, gibt es nie eine direkte (binäre) Abhängigkeit auf die mit Reflection verwendeten Klassen. Sie kann deshalb unabhängig vom Vorhandensein der benutzten Klasse geladen und ausgeführt werden.</li>
<li>Die mit Reflection aufgerufenen Klassen müssen z.B. keinen bestimmten Typ haben, sondern nur Methoden mit einer bestimmten Signatur anbieten.</li>
<li>Verwendung von Annotations</li>
<li>Generische / konfigurierbare Ausführung von Programmen wird möglich.</li>
</ol>
</div>
<div class="section" id="nachteile">
<h2>3.2.2. Nachteile<a class="headerlink" href="#nachteile" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Die Reflection-API arbeitet mit Strings. Dadurch entsteht nur eine implizite Abhängigkeit / Kopplung zu den benutzen Klassen. Bei einer Veränderung der API der benutzten Klassen kann diese (vom Compiler unbemerkt) gebrochen werden.</li>
</ol>
</div>
<div class="section" id="beispiel-allgemein">
<h2>3.2.3. Beispiel Allgemein<a class="headerlink" href="#beispiel-allgemein" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">advanced_techniques.reflection</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Reflection Example: Dummy Class to be loaded and instantiated dynamically</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DummyClass</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">myVar</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">(</span><span class="n">String</span> <span class="n">yourName</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Hello World, hello %s\n&quot;</span><span class="o">,</span> <span class="n">yourName</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">advanced_techniques.reflection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.lang.reflect.Field</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationTargetException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.lang.reflect.Modifier</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Reflection example</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Reflection</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">myClass</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">helloMethodName</span> <span class="o">=</span> <span class="s">&quot;sayHello&quot;</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Reflection</span><span class="o">(</span><span class="n">String</span> <span class="n">className</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>

            <span class="c1">// Get Class by String</span>
            <span class="n">myClass</span> <span class="o">=</span> <span class="n">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="n">className</span><span class="o">);</span>

            <span class="c1">// Get Method by String</span>
            <span class="n">Method</span> <span class="n">helloMethod</span> <span class="o">=</span> <span class="n">myClass</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="n">helloMethodName</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

            <span class="c1">// Create an instance</span>
            <span class="n">Object</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">myClass</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>

            <span class="c1">// Invoke method</span>
            <span class="n">helloMethod</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">instance</span><span class="o">,</span> <span class="s">&quot;Samuel&quot;</span><span class="o">);</span>

            <span class="c1">// Get Field and Method list</span>
            <span class="n">Method</span><span class="o">[]</span> <span class="n">methods</span> <span class="o">=</span> <span class="n">myClass</span><span class="o">.</span><span class="na">getDeclaredMethods</span><span class="o">();</span>
            <span class="n">String</span> <span class="n">methodsString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
            <span class="k">for</span><span class="o">(</span><span class="n">Method</span> <span class="n">method</span> <span class="o">:</span> <span class="n">methods</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">methodsString</span> <span class="o">+=</span>
                        <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
                                <span class="s">&quot;%s %s(%s)&quot;</span><span class="o">,</span>
                                <span class="n">Modifier</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()),</span>
                                <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span>
                                <span class="n">method</span><span class="o">.</span><span class="na">getParameterTypes</span><span class="o">()</span>
                        <span class="o">);</span>
            <span class="o">}</span>

            <span class="n">Field</span><span class="o">[]</span> <span class="n">fields</span> <span class="o">=</span> <span class="n">myClass</span><span class="o">.</span><span class="na">getDeclaredFields</span><span class="o">();</span>
            <span class="n">String</span> <span class="n">fieldStrings</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
            <span class="k">for</span><span class="o">(</span><span class="n">Field</span> <span class="n">field</span> <span class="o">:</span> <span class="n">fields</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">fieldStrings</span> <span class="o">+=</span>
                        <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
                                <span class="s">&quot;%s %s %s&quot;</span><span class="o">,</span>
                                <span class="n">Modifier</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()),</span>
                                <span class="n">field</span><span class="o">.</span><span class="na">getType</span><span class="o">(),</span>
                                <span class="n">field</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span>
                        <span class="o">);</span>
            <span class="o">}</span>


            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
                    <span class="s">&quot;\n\nCalled by class %s with \n\nMethods:\n%s\n\nFields:\n%s&quot;</span><span class="o">,</span>
                    <span class="n">className</span><span class="o">,</span>
                    <span class="n">methodsString</span><span class="o">,</span>
                    <span class="n">fieldStrings</span>
            <span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Class %s could not be found.&quot;</span><span class="o">,</span> <span class="n">className</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">NoSuchMethodException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Method %s could not be found.&quot;</span><span class="o">,</span> <span class="n">helloMethodName</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Illegal Access&quot;</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InstantiationException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Error when instantiating class %s&quot;</span><span class="o">,</span> <span class="n">className</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Error when calling method %s&quot;</span><span class="o">,</span> <span class="n">helloMethodName</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span> <span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>

        <span class="c1">// Use Fully Qualified Module Name!</span>
        <span class="k">new</span> <span class="n">Reflection</span><span class="o">(</span><span class="s">&quot;advanced_techniques.reflection.DummyClass&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="beispiel-aufgabe-interface-creator">
<h2>3.2.4. Beispiel Aufgabe Interface Creator<a class="headerlink" href="#beispiel-aufgabe-interface-creator" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">advanced_techniques</span><span class="o">.</span><span class="n">reflection</span><span class="p">;</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Reflection</span> <span class="n">Example</span><span class="p">:</span> <span class="n">Dummy</span> <span class="n">Class</span> <span class="n">to</span> <span class="n">be</span> <span class="n">loaded</span> <span class="ow">and</span> <span class="n">instantiated</span> <span class="n">dynamically</span>
 <span class="o">*/</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">DummyClass</span> <span class="p">{</span>

    <span class="n">private</span> <span class="n">static</span> <span class="n">final</span> <span class="nb">int</span> <span class="n">myVar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">sayHello</span><span class="p">(</span><span class="n">String</span> <span class="n">yourName</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;Hello World, hello </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">yourName</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">language:</th><td class="field-body">java</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span>package advanced_techniques.reflection;

import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.lang.reflect.Modifier;

/**
 * Reflection example
 */
public class Reflection {

    private Class&lt;?&gt; myClass;
    private static final String helloMethodName = &quot;sayHello&quot;;

    public Reflection(String className) {

        try {

            // Get Class by String
            myClass = Class.forName(className);

            // Get Method by String
            Method helloMethod = myClass.getMethod(helloMethodName, String.class);

            // Create an instance
            Object instance = myClass.newInstance();

            // Invoke method
            helloMethod.invoke(instance, &quot;Samuel&quot;);

            // Get Field and Method list
            Method[] methods = myClass.getDeclaredMethods();
            String methodsString = &quot;&quot;;
            for(Method method : methods) {
                methodsString +=
                        String.format(
                                &quot;%s %s(%s)&quot;,
                                Modifier.toString(method.getModifiers()),
                                method.getName(),
                                method.getParameterTypes()
                        );
            }

            Field[] fields = myClass.getDeclaredFields();
            String fieldStrings = &quot;&quot;;
            for(Field field : fields) {
                fieldStrings +=
                        String.format(
                                &quot;%s %s %s&quot;,
                                Modifier.toString(field.getModifiers()),
                                field.getType(),
                                field.getName()
                        );
            }


            System.out.format(
                    &quot;\n\nCalled by class %s with \n\nMethods:\n%s\n\nFields:\n%s&quot;,
                    className,
                    methodsString,
                    fieldStrings
            );

        } catch (ClassNotFoundException ex) {
            System.out.format(&quot;Class %s could not be found.&quot;, className);
        } catch (NoSuchMethodException ex) {
            System.out.format(&quot;Method %s could not be found.&quot;, helloMethodName);
        } catch (IllegalAccessException ex) {
            System.out.format(&quot;Illegal Access&quot;);
        } catch (InstantiationException ex) {
            System.out.format(&quot;Error when instantiating class %s&quot;, className);
        } catch (InvocationTargetException ex) {
            System.out.format(&quot;Error when calling method %s&quot;, helloMethodName);
        }
    }

    public static void main (String args[]) {

        // Use Fully Qualified Module Name!
        new Reflection(&quot;advanced_techniques.reflection.DummyClass&quot;);
    }
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">language:</th><td class="field-body">java</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../gui/gui.html" class="btn btn-neutral float-right" title="4. GUI" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../annotation/annoations.html" class="btn btn-neutral" title="3.1. Annotations" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Samuel Blattner.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>